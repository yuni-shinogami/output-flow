---
name: slide-draft
description: アウトラインとスライド設計プランに基づき、セクション単位でMarp形式スライドを執筆しslides.mdに保存する。完了後に自動でslide-reviewを起動する。「スライド執筆」「スライド下書き」で起動。
user-invocable: true
allowed-tools: Read, Write, Bash, Skill
argument-hint: "<project-name>"
---

# Phase 2: スライド執筆

プロジェクト: **$ARGUMENTS**

`$ARGUMENTS` 未指定なら案内して終了。
まず以下を読み込む:
- `output/$ARGUMENTS/outline/context.md`
- `output/$ARGUMENTS/outline/goal.md`
- `output/$ARGUMENTS/outline/outline.md`
- `output/$ARGUMENTS/slide/slide-plan.md`
- `.claude/skills/slide/themes/starter/docs/style-guide.md`（デザインシステム: スタイルガイド）
- `.claude/skills/slide/themes/starter/docs/patterns.md`（デザインシステム: レイアウトパターンカタログ）
- `.claude/skills/slide/themes/starter/docs/svg-guide.md`（SVG生成ガイド — slide-plan.mdにSVG計画がある場合に参照）

いずれか不在なら該当フェーズを案内（`.claude/skills/slide/themes/starter/docs/` のファイルが不在でも続行可能だが、存在する場合は必ず参照すること）。

## スライド構造

すべてのプレゼンは slide-plan.md の構成パターンに従う。共通要素と構成パターン別要素を組み合わせる。

### 共通の定型要素
1. **表紙** — タイトル + 登壇者名
2. **掴み** — 聴衆の興味を引く（slide-plan.mdの掴み方針に従う）
3. **自己紹介** — 登壇者の簡単な紹介
4. **[外部LT] 会社紹介/活動紹介** — context.mdの場が外部の場合
5. **ブリッジ「ここから本題」** — 自己紹介パートと本題の境界（外部LTの場合推奨）
6. **お品書き** — 話す内容を箇条書き（slide-plan.mdのお品書きに対応）
7. **本題** — メインコンテンツ（各章の先頭にブリッジスライドを配置）
8. **転換お品書き** — トピック切替時にお品書きを再表示し、次のトピックを **太字** で強調
9. **まとめ** — 今日話した内容を箇条書きで要約
10. **クロージングブリッジ** — 締めの1メッセージ
11. **おまけ or 宣伝** — slide-plan.mdの方針に従う（なしも可）

### 構成パターン別の追加要素

**PREP型（結論先出し）の場合:**
- お品書きの前に「結論先出し」スライドを配置
- 結論の直後に「想定反論」スライドを配置
- 「一つ一つ解きほぐして解説」のようなブリッジで本題に入る

**体験談型の場合:**
- お品書きは省略可（ストーリー駆動）
- ブリッジスライドでストーリーの転換点を示す

## ブリッジスライド

セクション転換や感情的インパクトを与えるための全画面メッセージスライド。

### Marp記法
```markdown
---
<!-- _class: bridge -->

# [1行メッセージ]

<!-- スピーカーノート: [ここでの話し方・間の取り方] -->
```

### 配置ルール
- 自己紹介→本題の境界（「ここから本題」）
- 各章の開始前（章のテーマを1行で予告）
- 結論や転換点の強調
- クロージング（締めの1メッセージ）

### 例
- 「ここから本題」
- 「めんどくさいフォームの向き合い方」
- 「最初に結論を言います」
- 「エンジニアよ 楽しく盆栽を育てていこう」

## 段階的ビルドアップ

重要な図解や概念は、1枚で全情報を出すのではなく、複数枚で段階的に情報を追加していく。

### パターン
1. **図解ビルドアップ**: 同じ図に要素を1つずつ追加（2〜7枚）
2. **Q&A形式**: 質問スライド → 回答スライド → 補足スライド
3. **結論導出**: 前提 → 推論 → 結論

### 使いどころ
- 概念の全体像を示す図解
- 「なぜ？」への段階的な回答
- 複数の要素が関係する仕組みの説明

slide-plan.mdの「ビルドアップ箇所」に指定があればそれに従い、なければ執筆時に適切な箇所を判断する。

## 画像・SVGの扱い

slide-plan.mdに「画像・SVG計画」がある場合、以下のルールに従う:

- **ディレクトリ準備**: 外部SVG/画像がある場合は `output/$ARGUMENTS/slide/images/` を作成
- **インラインSVG**: 20行以下の小さな図は `slides.md` 内に直接記述
- **外部SVG**: 複雑な図は `output/$ARGUMENTS/slide/images/*.svg` に保存し `<img src="images/xxx.svg">` で参照
- **レイアウトクラス**: `img-text-right`, `img-text-left`, `img-center`, `img-full`, `img-grid` を使用（`.claude/skills/slide/themes/starter/docs/patterns.md` 参照）
- **SVGスタイル制約**: `.claude/skills/slide/themes/starter/docs/svg-guide.md` のカラーパレット・viewBox・品質ルールに従う

## 執筆プロセス

### ステップ1: 全体スライド構成の提示

slide-plan.mdの構成対応表をもとに、定型構造を含めたスライド全体の構成（スライド番号のマッピング）を提示する。導入パート（表紙〜お品書き）、本題パート（転換お品書き＋各トピック）、締めパート（まとめ）の3パートに分けて示す。

### ステップ2: パート単位でスライド執筆

以下の順序で執筆し、パートごとにユーザーに提示・確認する。

**2a. 導入パート（一括執筆）**
表紙 → 掴み → 自己紹介を一括で執筆。外部LTの場合は会社紹介/活動紹介とブリッジ「ここから本題」を含める。PREP型の場合は結論先出しスライド → 想定反論 → ブリッジを含める。その後お品書きを配置して提示。

**2b. 本題パート（1トピックずつ執筆）**
各トピックの先頭に**ブリッジスライド**（章テーマの1行予告）と**転換お品書きスライド**を配置し、続けてそのトピックのスライドを執筆。1トピックずつ提示して確認。

**2c. 締めパート**
まとめスライド + クロージングブリッジ（締めの1メッセージ）を執筆。slide-plan.mdの方針に従い、おまけ/宣伝スライドがあればそれも含めて提示。

各スライドの執筆で意識すること:
- **全スライドに `<!-- _class: [パターン名] -->` を付与**する。slide-plan.mdのパターン選定テーブルに従い、`.claude/skills/slide/themes/starter/docs/patterns.md` のMarpコード例を参照する
- **1スライド1メッセージ**を原則とする
- **孤立文字の防止**: 大きいフォントのh1はパターンごとの1行文字数上限を意識し、超える場合は `<br>` で意味のまとまりごとに改行位置を制御する（上限目安: title=9文字, cover=14文字, emphasis=11文字, bridge=13文字, emphasis-detail=15文字, summary ol li=18文字。詳細は `.claude/skills/slide/themes/starter/docs/style-guide.md` の孤立文字防止セクション参照）
- `.claude/skills/slide/themes/starter/docs/style-guide.md` のカラーパレット・タイポグラフィ・NGパターンに従う
- slide-plan.mdのビジュアル方針に従う
- アウトラインの「ポイント」「具体例」「独自性」を活かす
- テキストは最小限に。箇条書きは3〜5項目以内
- スピーカーノートに補足説明・話す内容を記載
- お品書きスライド: トピックの箇条書き
- 転換お品書きスライド: 同じ項目を表示し、これから話すトピックを **太字** で強調
- まとめスライド: 話した内容を箇条書きで要約
- ブリッジスライドは配置ルールに従って挿入する
- 複雑な概念や図解には段階的ビルドアップを検討する
- SVG/画像の配置は画像レイアウトクラスを使用し、slide-plan.mdの画像・SVG計画に従う
- 枚数目安: 5分LT=15-20枚、10分LT=30-40枚、20-30分=70-90枚

**各パート提示後、ユーザーに方向性を確認する。** 修正要望があれば反映してから次に進む。

### ステップ3: 全体通し確認

全スライド完了後、通しで見たときの流れを確認し、必要に応じてつなぎのスライドやテンポを調整する。

### ステップ3.5: Canvaマッピングガイドの生成（条件付き）

slide-plan.mdの「最終出力形式」が「Canvaで仕上げ」の場合のみ実行する:

1. `output/$ARGUMENTS/slide/canva-guide.md` を作成
2. Canvaテンプレートがある場合はそのレイアウトに合わせたマッピングを記載
3. テンプレートがない場合は、一般的なCanva移行時のポイントを記載
4. 各スライドごとに以下を含める:
   - スライド番号と見出し
   - Canvaでの推奨レイアウト
   - 差し込むべきビジュアル要素（画像・図・アイコン等）
   - スピーカーノートの扱い

テンプレートは [templates/canva-guide.md](templates/canva-guide.md) を参照。

### ステップ4: 保存とスクリーンショット生成

完成したスライドを `output/$ARGUMENTS/slide/slides.md` に保存する。フォーマットは [templates/slides.md](templates/slides.md) を参照。

保存後、スクリーンショットを生成してプロジェクト内に保存する:
```bash
./.claude/skills/slide/scripts/take-screenshots.sh output/$ARGUMENTS/slide/slides.md output/$ARGUMENTS/slide/screenshots/
```
生成されたPNG画像で主要スライド（SVG/画像を含むスライド、情報量の多いスライド）を目視確認し、テキスト溢れやレイアウト崩れがあれば修正する。

## Marp形式の規約

```markdown
---
marp: true
theme: [テーマ名]
paginate: true
---

# スライドタイトル

本文内容

<!-- スピーカーノート: ここで話すこと -->

---

## 次のスライドタイトル

- 箇条書き項目

<!-- スピーカーノート -->
```

ユーザーに全体を提示し「このスライドでPhase 2を完了してよいか？」と確認する。

**重要: ユーザーが明示的に同意するまで次フェーズに進んではならない。修正要望があれば反映してから再度確認する。**

同意が得られたら「Phase 2 完了」と伝え、Skillツールで `slide-review` を引数 `$ARGUMENTS` で起動する。
